2013-06-27 Eric henson <egamma+spamikaze@gmail>
updated spamikaze mysql scripts to work with MySQL 5.6.10

2004-08-22  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/expire.pl: simplify the Big Query(tm) a bit

	* spamikaze/spamikaze-mysql.sql: octa/b/c/d are tinyint(3) unsigned

2004-08-16  Rik van Riel  <riel@humbolt>

	* html/index.php:
	please use the cvs snapshot, we fixed bugs since spamikaze 0.2 beta

2004-08-13  Cor Gest  <cor@humbolt.nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-08-04  Rik van Riel  <riel@humbolt>

	* spamikaze/cgi-bin/listing.cgi:
	if an IP address isn't found, give a link to Openrbl so people can easily check other lists

2004-08-04  Rik van Riel  <riel@humbolt>

	* spamikaze/cgi-bin/listing.cgi:
	if an IP address isn't found, give a link to Openrbl so people can easily check other lists

2004-08-03  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl: replace spaces with tabs

2004-07-20  Cor Gest  <cor@humbolt.nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-07-16  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/passivetrap.pl:
	I'm sure that anyone of you can think of a better regex but this one also
	catches qmail stuff (no brackets in those headers)

2004-07-16  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl: thinko

2004-07-16  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/passivetrap.pl:
	I'm sure that anyone of you can think of a better regex but this one also
	catches qmail stuff (no brackets in those headers)

2004-07-16  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl: thinko

2004-07-15  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl: comment out print

	* spamikaze/scripts/named.pl, spamikaze/scripts/passivetrap.pl:
	add some essential dots, eeek

	* spamikaze/scripts/passivetrap.pl:
	skip temporary files the MTA isn't ready with yet

	* spamikaze/scripts/passivetrap.pl:
	Add maildir processing to passivetrap.pl, to avoid the startup
	overhead of a perl script for every single message entering the
	system.  This seems to increase throughput here by more than a
	factor of 10, while reducing CPU use by a similar amount.

	It can be used like this:
	$ passivetrap -d /path/to/email

	The MTA needs to deliver the spam to /path/to/email/incoming and
	processed mail is stored in /path/to/email/archive ...

2004-07-14  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl:
	make things a little bit more modular

	* spamikaze/scripts/passivetrap.pl:
	prepare spamikaze for operating from a maildir spool directory
	this commit doesn't change the functionality, but is just there
	to make sure the original functionality stays working correctly

2004-07-11  Rik van Riel  <riel@humbolt>

	* README: speelchek

	* INSTALL:
	refer people to the online documentation for the mail and database scripts

	* html/doc/install.php:
	perl module should be installed in same directory as scripts - or in search path

	* html/doc/operations.php: formail if you want to parse a mailbox

2004-07-11  Hans Wolters  <h-wolters@humbolt>

	* TODO:
	closing database handlers and rewrite more of the documentation.

2004-07-11  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/expire.pl: remove unused code (warnings workaround)

2004-07-11  Hans Wolters  <h-wolters@humbolt>

	* INSTALL:
	Note on reading mboxes without using formail

2004-07-11  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/postfix.pl, spamikaze/scripts/sendmail.pl, spamikaze/scripts/text.pl, spamikaze/scripts/update.pl:
	convert more scripts to FindBin / lib

	* spamikaze/scripts/expire.pl:
	switch to FindBin & lib, instead of unshift

	* spamikaze/scripts/passivetrap.pl:
	Replace the ugly and inflexible unshift lines with FindBin
	and lib support.  Now spamikaze can find Spamikaze.pm no
	matter where the binaries are installed, as long as the
	library is in the same directory...

	--- passivetrap.pl	11 Jul 2004 20:10:54 -0000	1.11
	+++ passivetrap.pl	11 Jul 2004 20:49:46 -0000

	+use FindBin;
	+use lib "$FindBin::Bin";

	-unshift (@INC,"/home/webapps/spamikaze/spamikaze/spamikaze/scripts");
	-unshift (@INC, "/opt/spamikaze/scripts");
	-require Spamikaze;
	+use Spamikaze;

	* spamikaze/scripts/named.pl:
	automatically find Spamikaze.pm in path where the binary resides, also gets rid of compile warnings

	* spamikaze/scripts/passivetrap.pl: regexps don't need /g

2004-07-11  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/named.pl:
	Closing of the database handler, gave some warnings and a rollback
	on perl 5.6.1

2004-07-10  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl:
	also get envelope From MAILER-DAEMON

	* spamikaze/scripts/named.pl:
	Oh dear, the PSBL zone hasn't had many successful lookups lately
	due to this typo...  The $ORIGIN really needs to come directly
	from '.'

	--- named.pl	28 Jun 2004 11:59:26 -0000	1.10
	+++ named.pl	10 Jul 2004 20:44:31 -0000
	@@ -62,7 +62,7 @@
	 		$zone_header .= "\tIN\tA\t$Spamikaze::dnsbl_address\n";
	 	}

	-	$zone_header .= "\$ORIGIN\t$dnsbl_domain\n";
	+	$zone_header .= "\$ORIGIN\t$dnsbl_domain.\n";
	 	$zone_header .= "; standard dnsbl test entry\n";
	 	$zone_header .= "2.0.0.127\tIN\tA\t127.0.0.2\n";
	 	$zone_header .= "\t\tIN\tTXT\t$dnsbl_domain test entry\n";

2004-07-03  Cor Gest  <cor@humbolt.nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-07-03   Hans Spaans  <army@humbolt>

	* spamikaze/scripts/Spamikaze.pm:
	Fixed a little performance issue in the BOGON section. The resolver is now
	being forced to ignore searchdomains instead of trying all domains.

2004-07-02  Rik van Riel  <riel@humbolt>

	* README: link to site

	* html/download.php, html/index.php: link to spamikaze 0.2 beta

	* NEWS: 	Release Notes for Spamikaze 0.2 beta

	- Most scripts can be configured using the configuration file,
	  /etc/spamikaze/config
	- There is some documentation, available on the spamikaze web site:
	  http://spamikaze.nl.linux.org/doc/
	- Expiry policy is more flexible now.
	- New database layout, with better performance and better future
	  extensibility.
	- Source code cleanups left and right.
	- Postgresql support is BROKEN in version 0.2, mysql works though...

		Release Notes for Spamikaze 0.1

	- Proof of concept implementation.
	- All scripts need to be configured by hand.

2004-07-02  Hans Wolters  <h-wolters@humbolt>

	* INSTALL:

	Pointing to the correct dump for new users.

2004-07-02  Rik van Riel  <riel@humbolt>

	* INSTALL: refer people to online documentation

2004-07-03   Hans Spaans  <army@humbolt>

	* spamikaze/scripts/Spamikaze.pm:
	Fixed a little performance issue in the BOGON section. The resolver is now
	being forced to ignore searchdomains instead of trying all domains.

2004-07-02  Rik van Riel  <riel@humbolt>

	* README: link to site

	* html/download.php, html/index.php: link to spamikaze 0.2 beta

	* NEWS: 	Release Notes for Spamikaze 0.2 beta

	- Most scripts can be configured using the configuration file,
	  /etc/spamikaze/config
	- There is some documentation, available on the spamikaze web site:
	  http://spamikaze.nl.linux.org/doc/
	- Expiry policy is more flexible now.
	- New database layout, with better performance and better future
	  extensibility.
	- Source code cleanups left and right.
	- Postgresql support is BROKEN in version 0.2, mysql works though...

		Release Notes for Spamikaze 0.1

	- Proof of concept implementation.
	- All scripts need to be configured by hand.

2004-07-02  Hans Wolters  <h-wolters@humbolt>

	* INSTALL:

	Pointing to the correct dump for new users.

2004-07-02  Rik van Riel  <riel@humbolt>

	* INSTALL: refer people to online documentation

2004-06-29  Cor Gest  <cor@nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-06-29  Rik van Riel  <riel@humbolt>

	* html/doc/config.php: smaller extratime in example

	* html/maillist.php: add page title

	* html/menu.inc.php: fix typo

	* html/maillist.php, html/menu.inc.php:
	mailing list page, with an explanation on how to subscribe

	* html/index.php: almost ready, want testers

	* TODO: remove duplicate item

	* TODO:
	Remove already done items and move some less urgent things to the
	TODO list for future versions.  This leaves only these two items
	on the TODO list for version 0.2:

	Before next release:
	  * review the documentation for completeness
	  * test the current cvs tree on different machines.

	If there is something that really needs to be done for 0.2, in
	addition to these two items, now is the time to put them back
	onto the list ;)

	* TODO: IgnoreBounces support works now, so take it off the TODO list

	* html/doc/config.php: Index: config.php

	* spamikaze/scripts/passivetrap.pl:
	Very simple support for detection of RFC compliant bounce messages, and
	a few more.  Setting IgnoreBounces = 1 in the config file should help
	reduce false positives...

	+++ passivetrap.pl	29 Jun 2004 11:47:43 -0000
	@@ -20,6 +20,25 @@
	 sub from_daemon
	 {
	 	my ( $mail ) = @_;
	+	my $ignorebounces = $Spamikaze::ignorebounces;
	+
	+	unless ($ignorebounces eq 'true' or $ignorebounces == 1) {
	+		return 0;
	+	}
	+
	+	if ($mail =~ /^From:?\s+\<\>/mg) {
	+		return 1;
	+	}
	+	if ($mail =~ /^Return-Path:?\s+\<\>/mg) {
	+		return 1;
	+	}
	+	if ($mail =~ /^From:\s+\<?MAILER.DAEMON/mgi) {
	+		return 1;
	+	}
	+	if ($mail =~ /^From:\s+\<?postmaster/mgi) {
	+		return 1;
	+	}
	+
	 	return 0;
	 }

	* spamikaze/config/config.ini.example: Index: config/config.ini.example

	* spamikaze/scripts/Spamikaze.pm: Index: Spamikaze.pm

	* html/doc/docmenu.inc.php, html/doc/install.php, html/doc/operations.php:
	Spamikaze operations, except sendmail.pl

	* html/doc/config.php, html/doc/docmenu.inc.php, html/doc/web.php:
	basic web script documentation

	* TODO: finished CGI programs for 0.2

	* spamikaze/cgi-bin/remove.cgi:
	Teach removal.cgi about includes and all the new spamikaze things,
	now it can be used on psbl.surriel.com (and presumably other DNSBLs,
	too) without any editing.  Apart from documentation, this was probably
	the last major TODO item for Spamikaze version 0.2

	* spamikaze/cgi-bin/remove.cgi: small cleanup


2004-06-29  Rik van Riel  <riel@humbolt>

	* html/doc/config.php: smaller extratime in example

	* html/maillist.php: add page title

	* html/menu.inc.php: fix typo

	* html/maillist.php, html/menu.inc.php:
	mailing list page, with an explanation on how to subscribe

	* html/index.php: almost ready, want testers

	* TODO: remove duplicate item

	* TODO:
	Remove already done items and move some less urgent things to the
	TODO list for future versions.  This leaves only these two items
	on the TODO list for version 0.2:

	Before next release:
	  * review the documentation for completeness
	  * test the current cvs tree on different machines.

	If there is something that really needs to be done for 0.2, in
	addition to these two items, now is the time to put them back
	onto the list ;)

	* TODO: IgnoreBounces support works now, so take it off the TODO list

	* html/doc/config.php: Index: config.php

	* spamikaze/scripts/passivetrap.pl:
	Very simple support for detection of RFC compliant bounce messages, and
	a few more.  Setting IgnoreBounces = 1 in the config file should help
	reduce false positives...

	+++ passivetrap.pl	29 Jun 2004 11:47:43 -0000
	@@ -20,6 +20,25 @@
	 sub from_daemon
	 {
	 	my ( $mail ) = @_;
	+	my $ignorebounces = $Spamikaze::ignorebounces;
	+
	+	unless ($ignorebounces eq 'true' or $ignorebounces == 1) {
	+		return 0;
	+	}
	+
	+	if ($mail =~ /^From:?\s+\<\>/mg) {
	+		return 1;
	+	}
	+	if ($mail =~ /^Return-Path:?\s+\<\>/mg) {
	+		return 1;
	+	}
	+	if ($mail =~ /^From:\s+\<?MAILER.DAEMON/mgi) {
	+		return 1;
	+	}
	+	if ($mail =~ /^From:\s+\<?postmaster/mgi) {
	+		return 1;
	+	}
	+
	 	return 0;
	 }

	* spamikaze/config/config.ini.example: Index: config/config.ini.example

	* spamikaze/scripts/Spamikaze.pm: Index: Spamikaze.pm

	* html/doc/docmenu.inc.php, html/doc/install.php, html/doc/operations.php:
	Spamikaze operations, except sendmail.pl

	* html/doc/config.php, html/doc/docmenu.inc.php, html/doc/web.php:
	basic web script documentation

	* TODO: finished CGI programs for 0.2

	* spamikaze/cgi-bin/remove.cgi:
	Teach removal.cgi about includes and all the new spamikaze things,
	now it can be used on psbl.surriel.com (and presumably other DNSBLs,
	too) without any editing.  Apart from documentation, this was probably
	the last major TODO item for Spamikaze version 0.2

	* spamikaze/cgi-bin/remove.cgi: small cleanup

2004-06-28  Rik van Riel  <riel@humbolt>

	* html/menu.inc.php: no web stats

	* html/download.php:
	snapshots available from ftp://ftp.nl.linux.org/pub/spamikaze/snapshots/

	* spamikaze/scripts/text.pl:
	plaintext output of the currently listed IP addresses

	* TODO: Index: TODO

	* spamikaze/config/config.ini.example: add Address config option

	* spamikaze/scripts/Spamikaze.pm, spamikaze/scripts/named.pl:
	Uh oh, forgot to add an A record to the zone, so nobody could look
	up the site http://psbl.surriel.com/ ...

	This fixes it, adding the optional DNSBL / Address configuration
	option.  Will add to the documentation ASAP.

	Index: Spamikaze.pm

	* spamikaze/scripts/named.pl:
	Fix named.pl to work fine with multiple secondary NS servers.

	+++ Spamikaze.pm	28 Jun 2004 02:54:30 -0000
	@@ -41,7 +41,7 @@
	...
	-our @dnsbl_secondary_nses;
	+our $dnsbl_secondary_nses;
	...
	@@ -101,7 +101,7 @@
	...
	-	@dnsbl_secondary_nses = $cfg->val ('DNSBL', 'SecondaryNSes' );
	+	$dnsbl_secondary_nses = $cfg->val ('DNSBL', 'SecondaryNSes' );
	...
	+++ named.pl	28 Jun 2004 02:54:30 -0000
	@@ -39,7 +39,7 @@
	...
	-	my @secondary_nses = @Spamikaze::dnsbl_secondary_nses;
	+	my @secondary_nses = split /\s+/, $Spamikaze::dnsbl_secondary_nses;
	...

	* html/doc/config.php:
	Update configuration to understand the new meaning of ExtraTime:

	@@ -80,7 +80,9 @@
	 first spam (<tt>FirstTime</tt>) and how many hours a host is blocked for
	 every subsequent spam (<tt>ExtraTime</tt>).  Note that the ExtraTime
	 parameter is cumulative; if a host sends 3 spams, it will be blocked
	-for 3 times ExtraTime, measured from the last spam that arrived.
	+for FirstTime plus 3 times ExtraTime, measured from the last spam that
	+arrived.   The cumulative extra listing time can be switched off by
	+setting ExtraTime to 0.

	* spamikaze/scripts/expire.pl:
	Add $Spamikaze::firsttime to the bonus time calculation for multiple
	spam entries, so it is possible to set the ExtraTime variable in the
	configuration to 0 for a flat expiry time, without accidentally
	expiring everything at once...

	* spamikaze/scripts/expire.pl: uh oh, that was buggy

	* spamikaze/scripts/expire.pl, spamikaze/scripts/named.pl:
	get rid of more warnings

2004-06-26  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/expire.pl: get rid of perl warnings

	* spamikaze/cgi-bin/listing.cgi:
	some extra text, cleanup and warnings workaround

	* spamikaze/scripts/expire.pl, spamikaze/scripts/expire2.pl:
	move to new version of expire script

2004-06-21  Rik van Riel  <riel@humbolt>

	* TODO:
	most documentation is there, the main thing missing is the web interface

2004-06-21  Hans Wolters  <h-wolters@humbolt>

	* TODO:

	Added the whitelist zone idea

2004-06-21  Rik van Riel  <riel@humbolt>

	* TODO: implement evidence table only for later versions, not for 0.2

	* spamikaze/scripts/named.pl:
	Spamikaze.pm parses the config options needed by the cgi scripts

	* spamikaze/cgi-bin/example-footer.php, spamikaze/cgi-bin/example-header.php, spamikaze/cgi-bin/example-index.php, spamikaze/cgi-bin/listing.cgi, spamikaze/config/config.ini.example:
	teach listing.cgi to use footer and header, it can now be used without editing

	* TODO:
	  * optionally, make spamikaze ignore (RFC compliant) bounce messages

2004-06-21  Cor Gest  <cor@nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-06-21  Rik van Riel  <riel@humbolt>

	* TODO: -  * make sure web scripts work with new database layout
	+  * make sure cgi apps can run on various sites without modification
	+    (include header & footer, specified by config file)

	* spamikaze/cgi-bin/remove.cgi:
	remove.cgi now uses Spamikaze module too

	* spamikaze/scripts/named.pl:
	don't spit out an error message if {HOME} isn't defined

	* spamikaze/cgi-bin/listing.cgi: s/received spam/spamtrap hit/

	* spamikaze/cgi-bin/listing.cgi: make listing script use config file

2004-06-20  Rik van Riel  <riel@humbolt>

	* html/doc/intro.php: fix typo

2004-06-21  Rik van Riel  <riel@humbolt>

	* TODO: -  * make sure web scripts work with new database layout
	+  * make sure cgi apps can run on various sites without modification
	+    (include header & footer, specified by config file)

	* spamikaze/cgi-bin/remove.cgi:
	remove.cgi now uses Spamikaze module too

	* spamikaze/scripts/Spamikaze.pm:
	don't spit out an error message if {HOME} isn't defined

	* spamikaze/cgi-bin/listing.cgi: s/received spam/spamtrap hit/

	* spamikaze/cgi-bin/listing.cgi: make listing script use config file

2004-06-20  Rik van Riel  <riel@humbolt>

	* html/doc/intro.php: fix typo

2004-06-05  Cor Gest  <cor@nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-06-04  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/Spamikaze.pm:
	also allow numerical 1 for true in IgnoreBOGON and IgnoreRFC1918

2004-06-04  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/Spamikaze.pm:
	also allow numerical 1 for true in IgnoreBOGON and IgnoreRFC1918

2004-06-02  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/spamikaze-mysql-update.sql, spamikaze/spamikaze-mysql.sql:

	Tuning the indexes for named.pl:

	alter table ipnumbers add index idx_visible(visible);

2004-06-01  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/spamikaze-mysql-update.sql, spamikaze/spamikaze-mysql.sql:

	Added a new index for some extra speed. For those of you who already are using
	the new tables, use the following:

	alter table ipentries add index idx_dl(date_logged);

2004-05-31  Rik van Riel  <riel@humbolt>

	* html/download.php: comment out non-working http download link

	* html/doc/config.php: small enhancement

	* html/doc/docmenu.inc.php: <h2> documentation index

	* html/doc/config.php: and close the last </pre> ;)

	* html/doc/config.php: add Example: everywhere

	* html/doc/config.php, html/doc/install.php:
	basic config file documentation

2004-05-28  Cor Gest  <cor@nl.linux.org>

	* ChangeLog: ChangeLog Updated

2004-05-27  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/php/remove.php:

	New tables

	* spamikaze/php/spamlisting.php:

	This should make it run on the new tables. I will test it this weekend and
	will try to add the countries again.

2004-05-27  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/php/remove.php:

	New tables

	* spamikaze/php/spamlisting.php:

	This should make it run on the new tables. I will test it this weekend and
	will try to add the countries again.

2004-05-25  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/cgi-bin/remove.cgi:

	New tables...

	* spamikaze/cgi-bin/listing.cgi:

	New tables....

	* spamikaze/spamikaze-mysql-update.sql, spamikaze/spamikaze-mysql.sql:

	Added an index to make sure the queries run a bit faster

2004-05-25  Rik van Riel  <riel@humbolt>

	* TODO: web scripts need fixing

	* spamikaze/scripts/passivetrap.pl: some more typography

	* spamikaze/scripts/Spamikaze.pm, spamikaze/scripts/expire2.pl, spamikaze/scripts/getcountries.pl, spamikaze/scripts/gethostname.pl, spamikaze/scripts/named.pl, spamikaze/scripts/passivetrap.pl, spamikaze/scripts/popchecker.pl, spamikaze/scripts/postfix.pl, spamikaze/scripts/sendmail.pl, spamikaze/scripts/sethostn.pl, spamikaze/scripts/update.pl:
	make warranty disclaimer, copyright symbol and typography the same across files

	* spamikaze/scripts/expire2.pl:
	comment out the debugging prints, they slow the script down way too much

	* spamikaze/scripts/named.pl: pointer to config file

	* doc/example-config:
	the complete example configuration is in scripts/config

	* spamikaze/scripts/named.pl:
	named.pl now uses the configuration framework

	* spamikaze/config/config.ini.example: add dnsbl configuration

	* spamikaze/scripts/Spamikaze.pm: add parsing of dnsbl configuration

2004-05-24  Rik van Riel  <riel@humbolt>

	* html/doc/install.php: add another linebreak

	* html/doc/install.php: typography

	* html/doc/install.php: CPAN modules install

	* html/doc/install.php: passivetrap basics

2004-05-23  Rik van Riel  <riel@humbolt>

	* html/doc/install.php: typography

	* html/doc/install.php:
	cut'n'paste Hans's INSTALL document on database setup

2004-05-23  Hans Wolters  <h-wolters@humbolt>

	* TODO-database:

	Not needed anymore.

	* INSTALL:

	Added a section on updating the database tables to the new system.

	* spamikaze/spamikaze-mysql-update.sql:

	Added the dump to update the mysql database.

	* INSTALL, spamikaze/spamikaze-mysql.sql, spamikaze/spamikaze-sf.sql:
	removed the old sql file and added the new one

2004-05-23  Rik van Riel  <riel@humbolt>

	* html/doc/config.php, html/doc/docmenu.inc.php, html/doc/index.php, html/doc/install.php, html/doc/intro.php:
	move menu to include file

2004-05-22  Rik van Riel  <riel@humbolt>

	* html/doc/intro.php: a few more lines, sleep time now

	* html/doc/index.php: add warning that it's really incomplete

	* html/doc/config.php, html/doc/index.php, html/doc/install.php, html/doc/intro.php:
	very incomplete documentation

2004-05-21  Rik van Riel  <riel@humbolt>

	* html/doc/index.php: require ../menu.inc.php instead

	* html/doc/index.php, html/index.php, html/menu.inc.php:
	spamikaze documentation, empty

	* spamikaze/scripts/Spamikaze.pm:
	fix @RFC1918Addresses escape sequences

	* spamikaze/scripts/expire2.pl: fix warnings

	* spamikaze/scripts/Spamikaze.pm:
	s/my/our/ for the variables that need to be visible from scripts

2004-05-20  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/sendmail.pl:

	This enables sendmail.pl to use the new tables too

	* spamikaze/scripts/passivetrap.pl:

	passivetrap works on the new tables set.

2004-05-20  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/expire2.pl:
	add 127.0.0.2 to DONTEXPIRE as an example

	* spamikaze/scripts/update.pl: comment out too verbose printk

2004-05-19  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/passivetrap.pl:
	exit 0 if mail was from a daemon, don't want MTA to bounce

	* spamikaze/scripts/expire.pl, spamikaze/scripts/expire2.pl:
	get the config variables from Spamikaze.pm

	* spamikaze/scripts/Spamikaze.pm: my works fine, expire2.pl was wrong

	* spamikaze/scripts/Spamikaze.pm: s/my/our

	* spamikaze/scripts/expire2.pl:
	expire2.pl now uses Spamikaze.pm for its configuration

	* spamikaze/scripts/Spamikaze.pm:
	oops, forgot to declare the new variables

	* spamikaze/scripts/Spamikaze.pm, spamikaze/config/config.ini.example:
	add expiration config items

	* spamikaze/scripts/expire2.pl:
	ok, expire2.pl now uses Spamikaze.pm for some configuration values

2004-05-19  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/expire2.pl: expire2.pl

2004-05-17  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/sendmail.pl: now sendmail.pl runs again

	* spamikaze/config/config.ini.example:
	add some documentation and example values

	* spamikaze/config/config.ini.example:
	add the other configuration items Spamikaze.pm expects

	* spamikaze/scripts/Spamikaze.pm:
	s/Node/Host/ to match config.ini.example

	* spamikaze/scripts/named.pl, spamikaze/scripts/passivetrap.pl, spamikaze/scripts/postfix.pl, spamikaze/scripts/sendmail.pl, spamikaze/scripts/update.pl:
	add /opt/spamikaze/scripts to @INC

2004-05-15  Rik van Riel  <riel@humbolt>

	* p2p-design: 	Simple spamikaze data exchange design
		May 14, 2004

		Rik van Riel
		riel@surriel.com



		Overview

	Every spamikaze installation receives a limited amount of spam
	to its spamtraps.  This is a good thing since it limits the amount
	of resources (ab)used, but it increases the possibility of a
	spamikaze installation not learning of an ongoing spam run until
	that spam run hits its own spamtraps.  At that time the human
	users, who the spamikaze is supposed to shield, may have already
	received the spam in question.

	To improve the chances of spamikaze blocking spam sent to the
	users, it would be useful if there was a low overhead way for
	spamikaze installations to learn of spamtrap events at other
	spamikaze setups. This way mail from spam sources could be
	blocked before its own spam traps (and users) are spammed.

	This proposal contains ideas on how to implement such a
	mechanism, addressing these areas:
	- Data Exchange Model
	- High Level Protocol
	- Protocol Details and Extensibility
	- Trust Model
	- Database and Security Considerations

	If you have any comments on this proposal, please email the
	spamikaze mailing list, <spamikaze@nl.linux.org>.


		Data Exchange Model

	The basic model is client/server, with the twist that any
	participant can be both client and server, though this is in
	no way necessary.  There will be two simple programs, one for
	the client (getting information from another spamikaze system)
	and one for the server (giving information to clients).

	The server will listen on a predetermined network port.  The client
	will connect to the server.  For simplicity (and security concerns)
	the first implementation will probably follow a one process per
	connection model, possibly using (x)inetd for access control.


		High Level Protocol

	There are basically three distinct phases of the data exchange:
	initial handshake, synchronisation and live feed.

	Initial handshake:  during this phase the server informs the
	client of a number of its identity, giving details like the
	name of the spamikaze list, the base URL for listing data,
	the email of the list maintainer, etc...

	Synchronisation:  the client asks the server for all spamtrap
	events that happened on the server since a certain timestamp,
	usually the timestamp of the last spamtrap event received from
	this particular server.  The server then proceeds to send the
	requested information to the client, potentially limiting the
	number of events sent to a certain number to prevent resource
	waste.

	Live feed:  after the synchronisation is done, the server will
	automatically send new spamtrap events to the client as they
	happen.  This could either be a live feed from the spamtrap
	software, or a periodic polling of the database.  The client
	does not need to send any requests, since the server is still
	"sending all spamtrap events since a certain timestamp", like
	the client requested in the synchronisation phase.

	Using this model we can synchronise both live events and the
	events that happened during the time where client and server
	were not connected to each other, using the same connection
	and protocol.


		Protocol Details and Extensibility

	In order to ease debuggability, extensibility, ease of programming
	and - through the former - security, spamikaze will use an RFC 822
	style plain text format for serving data to the client.

	RFC 822 style messages have the advantages of being easy to parse
	and of the client being able to ignore messages of unknown types,
	or message content of an unknown type.  This means that the protocol
	can be extended without the need for every spamikaze installation
	to upgrade to the new protocol simultaneously.

	The following are two examples of what a version 1 spamikaze
	message could look like, with all messages separated by an
	empty line:

	Type: Server-ID
	Spamikaze-name: PSBL
	Base-URL: "http://psbl.surriel.com/listing?ip=@IP@"

	Type: spamtrap
	IP: 1.2.3.4
	Time: 1084588813

	In this case, the message type can easily be identified by the
	"Type:" header; the rest of the message can be parsed by a
	routine that knows how to deal with this type of message, parsing
	the headers it knows about and ignoring the rest.  If the minimum
	data needed to process an event isn't present, the client can
	either ignore the message or trigger an error handling event like
	reinitialising the connection to the server.


		Trust Model

	Trust considerations are different for the client and the server
	side.  A server could decide to let anybody have information on
	which IP addresses are hitting its spamtraps, in effect giving
	the whole world read-only access to its database.  The main
	reasons for access control on the server side would be resource
	use and the possibility that a client could learn the identity
	of the server's spamtraps.

	A client, on the other hand, would only want to import data into
	its own spamikaze database from sources it trusts.  After all,
	the data being imported has influence on which email will be
	blocked.

	In this model it is important that each server only exports the
	data from its own spamtraps.  It is easy for a client to trust
	the spamtraps of one server, but a much bigger leap of faith to
	trust the data of whoever it is the server pulls data from.
	Additionally, passing through the data received from others
	creates the possibility of spamikaze installations passing the
	same messages around in an infinite loop, quickly exhausting
	resources everywhere.


		Database and Security Considerations

	The server side of the spamikaze network communications software
	only needs SELECT rights, to inform the client of spamtrap events.
	Assuming other standard precautions are followed, the potential
	for security problems with the server side should be minimal.

	Even though the client should only connect to trusted servers,
	the security risk on this side is bigger.  This is mostly due
	to the fact that the client software needs to have the ability
	to INSERT records with spamtrap event data into the database.

	Security risk and recoverability can be limited by not allowing
	the client to UPDATE records in the spamtrap events table, as
	well as by clearly identifying the source of every spamtrap
	event.  When a client decides to no longer trust a particular
	server, it will be easy to purge the database of all spamtrap
	events from that particular server.

	The database table with spamtrap events would contain the fields
	ID, IP address, timestamp and spamikaze_id, the last being an ID
	denoting from which server the data was obtained.  There would be
	a smaller table containing information about the spamikaze lists
	from which information is being obtained (the servers).

2004-05-15  Cor Gest  <cor@nl.linux.org>

	* ChangeLog: ChangeLog updated (at last)

2004-05-08   Hans Spaans  <army@humbolt>

	* spamikaze/scripts/postfix.pl: Added Spamikaze.pm support
	Added Postgresql support
	Clean the code somewhat
	Temp-file are now being used while doing the generation

2004-05-08   Hans Spaans  <army@humbolt>

	* spamikaze/scripts/postfix.pl: Added Spamikaze.pm support
	Added Postgresql support
	Clean the code somewhat
	Temp-file are now being used while doing the generation

2004-05-05   Hans Spaans  <army@humbolt>

	* TODO: Updated.

2004-05-01   Hans Spaans  <army@humbolt>

	* TODO: Added two items need for the next release

2004-04-27   Hans Spaans  <army@humbolt>

	* TODO:
	Removed a wishlist item because it is in Spamikaze.pm and the rest of the
	scripts will get it because they need Spamikaze.pm ;-)

	* spamikaze/scripts/Spamikaze.pm, spamikaze/scripts/named.pl:
	- Added GetDBType() to Spamikaze.pm
	- named.pl is now working with Spamikaze.pm
	- named.pl doesn't call rndc anymore!!!
	- named.pl and Spamikaze.pm have been processed by perltidy -t
	- Fixed sql-calls with old parameter $ticks
	- Removed all legacy variables to config.pl

	* spamikaze/scripts/passivetrap.pl, spamikaze/spamikaze-pg.sql, spamikaze/spamikaze-sf.sql:
	The new database layout wasn't applied to all files and because we try to
	get everything working in cvs we needed to change somethings.

	So please read the changes or things WILL stop working. Sorry for this.

	* doc/example-config:
	Added config-items for named.pl. The idea is to do BIND first and if we
	need to support more nameserver we make a seperate configfile for this.

	* spamikaze/scripts/named2.pl:
	Named2.pl has been removed because it was merged into 1.2 of named.pl.

	* spamikaze/scripts/named.pl:
	Named2.pl has been merged into named.pl. If you have problemen, please
	check out an older version from cvs.

2004-04-26   Hans Spaans  <army@humbolt>

	* spamikaze/scripts/Spamikaze.pm:
	- Spamikaze.pm is now able to get its config by ini-file. Please see example-config.
	- Spamikaze.pm default ignore 127/8 addresses
	- Spamikaze.pm can ignore BOGON IP-addresses using Net::DNS
	- Spamikaze.pm can ignore RFC1918 IP-addresses if you don't want to use
	  the BOGON way of checking.

	* doc/example-config:
	Added an example for the spamikaze config in ~/.spamikaze/config and/or
	/etc/spamikaze/config.

	* spamikaze/scripts/passivetrap.pl:
	- Passivetrap is now capable to find Spamikaze.pm again;
	- The function mxbackup has been moved to Spamikaze::MXBackup;
	- Passivetrap now stops subscribing 127.0.0.1 as spammer.

	* spamikaze/scripts/Spamikaze.pm:
	- Spamikaze.pm now has MXBackup to check if it is MX of our own.
	- Added a 1 to be on the safeside.

	* spamikaze/spamikaze-pg.sql:
	The database-layout for pgsql is now compliant with mysql.

2004-04-25  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/named2.pl:
	Fetches the data from the new table. Should be renamed to named.pl after
	we finished the rest of the scripts.

	TODO:

	expire.pl
	passivetrap.pl

2004-04-22  Hans Wolters  <h-wolters@humbolt>

	* TODO-database:
	s/timestamp/int

	keys will follow

2004-04-22  Rik van Riel  <riel@humbolt>

	* spamikaze/scripts/update.pl: statement needs IGNORE for newer mysql

2004-04-22  Hans Wolters  <h-wolters@humbolt>

	* spamikaze/scripts/update.pl:

	update script, see the TODO-database

2004-04-18  Hans Wolters  <h-wolters@humbolt>

	* TODO-database:
	Altered the main table a bit, forgot that yesterday. Added the state of
	the update.pl (not submitted yet).

2004-04-17  Rik van Riel  <riel@humbolt>

	* TODO-database: first part of conversion

2004-03-20  Rik van Riel  <riel@humbolt>

	* doc/Spamikaze-HOWTO.sgml, html/download.php, html/index.php, html/logo/spamikaze-small.jpg, html/logo/spamikaze.jpg, html/logo/spamikaze.png, html/menu.inc.php, html/remove.html, html/template.html:
	New file.

	* doc/Spamikaze-HOWTO.sgml, html/download.php, html/index.php, html/logo/spamikaze-small.jpg, html/logo/spamikaze.jpg, html/logo/spamikaze.png, html/menu.inc.php, html/remove.html, html/template.html:
	reimport spamikaze

	* doc/p2pweb-design.sgml, spamikaze/cgi-bin/listing.cgi, spamikaze/cgi-bin/remove.cgi, spamikaze/config/config.ini.example, spamikaze/config/config.php, spamikaze/config/config.pl, spamikaze/fqdn.sql, spamikaze/latest.sql, spamikaze/php/remove.php, spamikaze/php/spamlisting.php, spamikaze/scripts/Spamikaze.pm, spamikaze/scripts/expire.pl, spamikaze/scripts/getcountries.pl, spamikaze/scripts/gethostname.pl, spamikaze/scripts/named.pl, spamikaze/scripts/passivetrap.pl, spamikaze/scripts/popchecker.pl, spamikaze/scripts/postfix.pl, spamikaze/scripts/sendmail.pl, spamikaze/scripts/sethostn.pl:
	New file.

	* doc/p2pweb-design.sgml, spamikaze/cgi-bin/listing.cgi, spamikaze/cgi-bin/remove.cgi, spamikaze/config/config.ini.example, spamikaze/config/config.php, spamikaze/config/config.pl, spamikaze/fqdn.sql, spamikaze/latest.sql, spamikaze/php/remove.php, spamikaze/php/spamlisting.php, spamikaze/scripts/Spamikaze.pm, spamikaze/scripts/expire.pl, spamikaze/scripts/getcountries.pl, spamikaze/scripts/gethostname.pl, spamikaze/scripts/named.pl, spamikaze/scripts/passivetrap.pl, spamikaze/scripts/popchecker.pl, spamikaze/scripts/postfix.pl, spamikaze/scripts/sendmail.pl, spamikaze/scripts/sethostn.pl:
	reimport spamikaze

	* spamikaze/country.sql, spamikaze/spamikaze-pg.sql, spamikaze/spamikaze-sf.sql:
	New file.

	* spamikaze/country.sql, spamikaze/spamikaze-pg.sql, spamikaze/spamikaze-sf.sql:
	reimport spamikaze

	* API, COPYING, CREDITS, ChangeLog, ChangeLog-pre-version-0.1, INSTALL, README, TODO, TODO-database, p2p-design:
	New file.

	* API, COPYING, CREDITS, ChangeLog, ChangeLog-pre-version-0.1, INSTALL, README, TODO, TODO-database, p2p-design:
	reimport spamikaze

2004-02-08  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/config/config.ini.example:
	An example how the configfile will we looking like. Other items have to
	be added in the future.

2004-02-07  army  <army@cleopatra>

	* /home/CVS/spamikaze/TODO, /home/CVS/spamikaze/TODO-database:
	Updated both lists with my wishes.

2004-02-01  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/TODO-database: 		Database reorganisation
			$Id: ChangeLog,v 1.10 2004/08/27 21:51:49 cor Exp $


	In order to facilitate more flexible blocklisting, expiry, removal and
	whitelisting policies, a database redesign is necessary.  Before we can
	come up with such a new design, however, we should think about exactly
	what we want to store in the database.

	If you have ideas for other things that need to be stored, please email
	spamikaze@nl.linux.org or commit your idea to the list below.

	Data to store:
	- IP address of spam sending host
	- time each spam arrived
	- time of each IP address removal
	- number of spams received from each IP address
	- number of spams received from each IP address since last removal
	- time the IP address will automatically expire from the database,
	  calculated by the listing&expiry policy at the time the spam is
	  received
	- first characters of the subject of the spam (small enough to avoid
	  most unique tokens, 30 chars?)
	- email addresses to whitelist
	- number of IP addresses listed, per /24 (updated at listing and
	  unlisting time, used for easy block escalation)
	- same for /16 and /8 blocks, but for statistics only
	- the country each IP address is in, for statistics
	- the host name (from reverse DNS) for each IP address, for statistics
	  and per-domain queries


	The design of the database tables should be done once we have the
	requirements, or maybe earlier if the new design is flexible enough ;)

2004-02-01  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: *** empty log message ***

2003-12-12  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-12-12  cor gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated


2003-12-12  cor gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-12-12  cor gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-11-02  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	expiry is done by expire.pl, remove time code from named.pl

	* /home/CVS/spamikaze/spamikaze/country.sql:
	dump to initialise country table

2003-11-02  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/latest.sql:
	latest.sql

2003-11-02  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	expiry is done by expire.pl, remove time code from named.pl

	* /home/CVS/spamikaze/spamikaze/country.sql:
	dump to initialise country table

2003-11-02  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/latest.sql:
	latest.sql

2003-11-01  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/config.pl:
	config.pl can be found in spamikaze/config

2003-11-01  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:

	Earlier entries of the stored ip number should be set to visible too.

2003-11-01  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/expire.pl:
	the latest expire.pl is in spamikaze/scripts/

2003-10-25  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-10-24  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/fqdn.sql:

	dump of domain names.

	* /home/CVS/spamikaze/spamikaze/scripts/sethostn.pl:

	Sets the fqdn_id from the info in the new table. I will add a list of
	hostnames in a gzipped dump of my table.

	* /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl:

	Sendmail.pl will not need to expire by itself anymore, it will just need
	to fetch the visible ip numbers.

	* /home/CVS/spamikaze/spamikaze/scripts/gethostname.pl:

	This will need one more additional table:

	CREATE TABLE `country` (
	  `id` int(11) NOT NULL auto_increment,
	    `country` char(2) NOT NULL default '',
	      PRIMARY KEY  (`id`),
	        UNIQUE KEY `idx_country` (`country`)
	        ) TYPE=MyISAM;

	and another field in the spammers table:

	ALTER TABLE spammers ADD c_id SMALLINT NOT NULL;

	It will store the countries from where the spammers will
	are spamming. This alteration and the one for the fqdn will
	be used to setup an admin/abuse interface in the future.

	More details later.

	Regards,

	Hans Wolters

	* /home/CVS/spamikaze/spamikaze/scripts/expire.pl:

	Ok, this is a new expire that will use different options and will look
	for hostnames, etc....

	What do you need for it to work:

	A new table fqdn:

	CREATE TABLE `fqdn` (
	  `id` int(11) NOT NULL auto_increment,
	    `hostname` varchar(200) NOT NULL default '',
	      PRIMARY KEY  (`id`),
	        UNIQUE KEY `idx_hostname` (`hostname`(40))
	        ) TYPE=MyISAM;

	An altered spammers table:

	ALTER TABLE spammers ADD fqdn_id INT NOT NULL;

	What will expire.pl do:

	It will look for hostnames and ranges that will not be
	expired. Empty hostnames (blackholes) will not be expired
	anyhow. Currently I have a working setup that will start
	the expire at 7 days and look for a new variable ($extratime)
	for the additional expire time for attempt 2 and higher.

	Beware of using this since you need to fill the fqdn table
	first. Some altered scripts for this will follow.

	* /home/CVS/spamikaze/spamikaze/scripts/postfix.pl, /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl:

	postfix: deleted the ticks line, the new expire.pl will be used to
	         expire.

	sendmail: made the connection use the Spamikaze.pm

	* /home/CVS/spamikaze/spamikaze/config/config.pl:

	New var name for ranges that will not be expired.

	* /home/CVS/spamikaze/spamikaze/scripts/Spamikaze.pm, /home/CVS/spamikaze/spamikaze/scripts/postfix.pl:

	Parses a postfix blacklist, uses the Spamikaze.pm to connect to the database.

2003-10-24  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/fqdn.sql:

	dump of domain names.

	* /home/CVS/spamikaze/spamikaze/scripts/sethostn.pl:

	Sets the fqdn_id from the info in the new table. I will add a list of
	hostnames in a gzipped dump of my table.

	* /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl:

	Sendmail.pl will not need to expire by itself anymore, it will just need
	to fetch the visible ip numbers.

	* /home/CVS/spamikaze/spamikaze/scripts/gethostname.pl:

	This will need one more additional table:

	CREATE TABLE `country` (
	  `id` int(11) NOT NULL auto_increment,
	    `country` char(2) NOT NULL default '',
	      PRIMARY KEY  (`id`),
	        UNIQUE KEY `idx_country` (`country`)
	        ) TYPE=MyISAM;

	and another field in the spammers table:

	ALTER TABLE spammers ADD c_id SMALLINT NOT NULL;

	It will store the countries from where the spammers will
	are spamming. This alteration and the one for the fqdn will
	be used to setup an admin/abuse interface in the future.

	More details later.

	Regards,

	Hans Wolters

	* /home/CVS/spamikaze/spamikaze/scripts/expire.pl:

	Ok, this is a new expire that will use different options and will look
	for hostnames, etc....

	What do you need for it to work:

	A new table fqdn:

	CREATE TABLE `fqdn` (
	  `id` int(11) NOT NULL auto_increment,
	    `hostname` varchar(200) NOT NULL default '',
	      PRIMARY KEY  (`id`),
	        UNIQUE KEY `idx_hostname` (`hostname`(40))
	        ) TYPE=MyISAM;

	An altered spammers table:

	ALTER TABLE spammers ADD fqdn_id INT NOT NULL;

	What will expire.pl do:

	It will look for hostnames and ranges that will not be
	expired. Empty hostnames (blackholes) will not be expired
	anyhow. Currently I have a working setup that will start
	the expire at 7 days and look for a new variable ($extratime)
	for the additional expire time for attempt 2 and higher.

	Beware of using this since you need to fill the fqdn table
	first. Some altered scripts for this will follow.

	* /home/CVS/spamikaze/spamikaze/scripts/postfix.pl, /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl:

	postfix: deleted the ticks line, the new expire.pl will be used to
	         expire.

	sendmail: made the connection use the Spamikaze.pm

	* /home/CVS/spamikaze/spamikaze/config/config.pl:

	New var name for ranges that will not be expired.

	* /home/CVS/spamikaze/spamikaze/scripts/Spamikaze.pm, /home/CVS/spamikaze/spamikaze/scripts/postfix.pl:

	Parses a postfix blacklist, uses the Spamikaze.pm to connect to the database.

2003-09-26  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-09-21  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi:
	Fixed a stupid mistake I introduced in a early patch.

2003-09-21  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi:
	Fixed a stupid mistake I introduced in a early patch.

2003-09-14  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	Updated the path to the pm. It was pointing to a private path used by me

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	15000 bytes is more then enough. Helps to work with a heavy load.

2003-09-11  Cor Gest  <cor@clsnet.nl>
	
	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-09-10  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/Spamikaze.pm:

	First setup for the Spamikaze.pm. I will test it some more and begin
	storing the db connections using the new pm soon.

2003-09-10  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/Spamikaze.pm:

	First setup for the Spamikaze.pm. I will test it some more and begin
	storing the db connections using the new pm soon.

2003-08-27  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/TODO:
	$_ doesn't handle 0.x.x.x

2003-08-24  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-08-24  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	Fixed a little problem with creating the new zonefile. BIND now always
	takes a correct zone even when named.pl crashes or is running for a
	long time.

2003-08-24  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	Fixed a little problem with creating the new zonefile. BIND now always
	takes a correct zone even when named.pl crashes or is running for a
	long time.

2003-08-15  army  <army@cleopatra>

	* /home/CVS/spamikaze/TODO: Removed some items that have been solved.

	* /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl:
	Script is now strict-compliant.

	* /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi:
	Both scripts are now strict-compliant.

	* /home/CVS/spamikaze/doc/Spamikaze-HOWTO.sgml:
	First setup for the Postgresql-part.

	* /home/CVS/spamikaze/doc/Spamikaze-HOWTO.sgml:
	Added the MySQL-section to Configuration.

2003-08-14  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/TODO:
	Some additions, droped the site layout to a future version

2003-08-13  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/expire.pl:
	Database code

2003-08-13  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

	* /home/CVS/spamikaze/p2p-design:
	Concept for debate

2003-08-13  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/config.pl, /home/CVS/spamikaze/expire.pl:
	ok gang,

	This is an example of how the expire could be. I dropped them in the
	main dir and will remove them once I had comments.

	The idea.

	In the config.pl we have a @DONTEXPIRE. This will enable us
	to make sure certain ranges will not expire.

	The expire.pl should be run seperate (doesn't expire yet) and
	will expire ipnr's that are not listed in @DONTEXPIRE and are:

	* listed once in the db and are older then time() - $ticks.
	* expire ipnumbers listed <= $maxspamsperip and ore older then time()
	  and $ticks.

	Calculation for the ipnumbers with more then one spam:
	$bonustime = $spamtime + ($ticks * $total);
	If this is <= time() they can expire.

	The $maxspamperip will enable some of us to run a real dangerous list :-)

	The idea would be to run this expire instead of having sendmail.pl
	and named.pl looking at the the expiretime. They could just select
	everything that's not 0/FALSE (visible field).

	Any comments are welcome.

	Hans

	p.s. $_ will not list ipnr's starting with 0, we need some more bugfixing.

	* /home/CVS/spamikaze/INSTALL:
	Altered the install a little.

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	Deleted comments that no long belong in here

	* /home/CVS/spamikaze/spamikaze/scripts/statscountry.pl:
	Will be added in a later version

	* /home/CVS/spamikaze/spamikaze/config/config.pl:
	removed some comments about the portnumbers for the database servers, this
	needs to be done in the documentation.

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	Not much, Hans S. shall we switch to a switch case kind of checking? Seems
	logical but I wonder if it's not default in perl.

	* /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi:
	Postgres

2003-08-13  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/doc/p2pweb-design.sgml:
	placeholder for documentation on p2p trusted network


2003-08-13  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/p2p-design:
	Concept for debate

2003-08-13  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/config.pl, /home/CVS/spamikaze/expire.pl:
	ok gang,

	This is an example of how the expire could be. I dropped them in the
	main dir and will remove them once I had comments.

	The idea.

	In the config.pl we have a @DONTEXPIRE. This will enable us
	to make sure certain ranges will not expire.

	The expire.pl should be run seperate (doesn't expire yet) and
	will expire ipnr's that are not listed in @DONTEXPIRE and are:

	* listed once in the db and are older then time() - $ticks.
	* expire ipnumbers listed <= $maxspamsperip and ore older then time()
	  and $ticks.

	Calculation for the ipnumbers with more then one spam:
	$bonustime = $spamtime + ($ticks * $total);
	If this is <= time() they can expire.

	The $maxspamperip will enable some of us to run a real dangerous list :-)

	The idea would be to run this expire instead of having sendmail.pl
	and named.pl looking at the the expiretime. They could just select
	everything that's not 0/FALSE (visible field).

	Any comments are welcome.

	Hans

	p.s. $_ will not list ipnr's starting with 0, we need some more bugfixing.

	* /home/CVS/spamikaze/INSTALL:
	Altered the install a little.

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	Deleted comments that no long belong in here

	* /home/CVS/spamikaze/spamikaze/scripts/statscountry.pl:
	Will be added in a later version

	* /home/CVS/spamikaze/spamikaze/config/config.pl:
	removed some comments about the portnumbers for the database servers, this
	needs to be done in the documentation.

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	Not much, Hans S. shall we switch to a switch case kind of checking? Seems
	logical but I wonder if it's not default in perl.

	* /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi:
	Postgres

2003-08-13  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/doc/p2pweb-design.sgml:
	placeholder for documentation on p2p trusted network

2003-08-09  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	Removed a debug statement.

2003-08-08  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/config/config.pl:
	;

	* /home/CVS/spamikaze/spamikaze/config/config.pl:
	Added @BLACKLISTDOMAINS and @BLACKLISTRANGES. No matter what kind of expire
	we will use, this can be handy. Code for the expire will follow.

2003-07-31  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-07-29  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	Named.pl now works with Postgresql. The code is quite a mess, but maybe
	we can merge code with MySQL.

	* /home/CVS/spamikaze/spamikaze/config/config.pl:
	Fixed a typo because the selection for a dbserver has changed.

2003-07-29  army  <army@cleopatra>

	* spamikaze/scripts/named.pl:
	Named.pl now works with Postgresql. The code is quite a mess, but maybe
	we can merge code with MySQL.

	* spamikaze/config/config.pl:
	Fixed a typo because the selection for a dbserver has changed.

2003-07-28  riel  <riel@cleopatra>

	* spamikaze/cgi-bin/listing.cgi: correct google URL s/./:/

2003-07-28  Cor Gest  <cor@clsnet.nl>

	* ChangeLog: ChangeLog Updated

2003-07-27  h-wolters  <h-wolters@cleopatra>

	* spamikaze/scripts/sendmail.pl, spamikaze/scripts/getcountries.pl, spamikaze/scripts/named.pl:
	More changes in the connection handler

	* INSTALL:

	Extra options in the config.pl mentioned

	* spamikaze/scripts/passivetrap.pl:
	port host and type are working for both postgres and mysql, trimmed down
	the connect part to handle it without the check on the dbtype.

2003-07-27  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl, /home/CVS/spamikaze/spamikaze/scripts/getcountries.pl, /home/CVS/spamikaze/spamikaze/scripts/named.pl:
	More changes in the connection handler

	* /home/CVS/spamikaze/INSTALL:

	Extra options in the config.pl mentioned

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	port host and type are working for both postgres and mysql, trimmed down
	the connect part to handle it without the check on the dbtype.

2003-07-25  army  <army@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	Passivetrap.pl is now capable of working with both MySQL as Postgresql.

	* /home/CVS/spamikaze/spamikaze/config/config.pl: Added variables for:
	- type of dbserver;
	- the host the database is running on;
	- the port of the dbserver.
	The last two are currently only used for Postgresql dbservers.

	* /home/CVS/spamikaze/spamikaze/spamikaze-pg.sql:
	Adding the database layout for Postgresql 7

2003-07-21  army  <army@cleopatra>

	* /home/CVS/spamikaze/TODO:
	Updated the todolist with things we needed to do before the next release.

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	Here are some backports from my pgsql-tree:
	- passivetrap.pl now uses strict;
	- fixed variables in main because of the introduction of strict;
	- changed a shift to be consistent in the way we handle parameters.

2003-07-21  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:
	Path

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:

	K, this should fix the security problem Hans Spaans mentioned. It's the old
	situation. The patch from John does check for empty lines correctly but it
	disables people to import spam using mbox? format. We should take a closer
	look to this.

2003-07-20  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl:

	Earlier solution that was patched needs a closer look.

	* /home/CVS/spamikaze/spamikaze/php/spamlisting.php:
	Cidr function for php, adjusted view for spamlisting.php, countries
	added.

2003-07-16  Cor Gest  <cor@cleopatra.clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog updated

2003-07-13  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/getcountries.pl:
	Store the countries in the database

	* /home/CVS/spamikaze/spamikaze/scripts/statscountry.pl:
	Script to parse a png with ip's blocked per country, see the file
	to alter your database.

	* /home/CVS/spamikaze/spamikaze/php/spamlisting.php:
	Support for /24 listing. One only needs to enter the first three
	octs without a trailing dot.

2003-07-13  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/getcountries.pl:
	Store the countries in the database

	* /home/CVS/spamikaze/spamikaze/scripts/statscountry.pl:
	Script to parse a png with ip's blocked per country, see the file
	to alter your database.

	* /home/CVS/spamikaze/spamikaze/php/spamlisting.php:
	Support for /24 listing. One only needs to enter the first three
	octs without a trailing dot.

2003-07-09  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi, /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl:
	patch from Hans Spaans

2003-07-09  Cor Gest  <cor@cleopatra.clsnet.nl>

	* /home/CVS/spamikaze/CREDITS: minor entry

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-06-30  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi, /home/CVS/spamikaze/spamikaze/scripts/named.pl, /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl, /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl, /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi:
	Patch from Hans Spaans to make sure our own functions will not be in the
	namespace of internal perl functions.

	* /home/CVS/spamikaze/CREDITS:
	First entries

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/config/config.pl:
	Looping only through the headers (John Bokma).

2003-06-30  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi, /home/CVS/spamikaze/spamikaze/scripts/named.pl, /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl, /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl, /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi:
	Patch from Hans Spaans to make sure our own functions will not be in the
	namespace of internal perl functions.

	* /home/CVS/spamikaze/CREDITS:
	First entries

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/config/config.pl:
	Looping only through the headers (John Bokma).

2003-06-27  Cor Gest  <cor@cleopatra.clsnet.nl>

	* /home/CVS/spamikaze/CREDITS: CREDITS file invoked

	please fill as appropriate

	it is in linux-kernel credit-file standards

2003-06-26  Cor Gest  <cor@cleopatra.clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-06-26  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi:
	* Parameters are now handled more safely
	* CGI parameters contain an empty string when the parameter doesn't
	  exist
	* CGI-scripts now produce some more sane html and its html4 based
		(Hans Spaans)

2003-06-26  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi:
	* Parameters are now handled more safely
	* CGI parameters contain an empty string when the parameter doesn't
	  exist
	* CGI-scripts now produce some more sane html and its html4 based
		(Hans Spaans)

2003-06-25  Cor Gest  <cor@cleopatra.clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated (post-version-0.1)

2003-06-24  Cor Gest  <cor@cleopatra.clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog:
	The log since publication of version 0.1

	* /home/CVS/spamikaze/ChangeLog-pre-version-0.1: file-name  says it all

2003-06-24  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/html/logo/spamikaze.png:
	-rw-rw-r--    1 hans     hans        16014 Jun 15 20:17 spamikaze.jpg
	-rw-rw-r--    1 hans     hans          929 Jun 24 22:32 spamikaze.png

	That's better

	* /home/CVS/spamikaze/html/template.html:
	K guys, with a little help from Niwo this file could be the template for
	the site. It holds some extra links to non-excisting images but just parse
	the logo in it (the small one).

	Once I have the time to work on the site again I will help improve it. This
	far it runs on most browsers ok but we need to validate that before going live.

	Rik, I don't like to distribute the layout for Spamikaze, can we use the blanks for that?

	Regards,

	Hans

2003-06-24  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog:
	The log since publication of version 0.1

	* /home/CVS/spamikaze/ChangeLog-pre-version-0.1: file-name  says it all

2003-06-24  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/html/logo/spamikaze.png:
	-rw-rw-r--    1 hans     hans        16014 Jun 15 20:17 spamikaze.jpg
	-rw-rw-r--    1 hans     hans          929 Jun 24 22:32 spamikaze.png

	That's better

	* /home/CVS/spamikaze/html/template.html:
	K guys, with a little help from Niwo this file could be the template for
	the site. It holds some extra links to non-excisting images but just parse
	the logo in it (the small one).

	Once I have the time to work on the site again I will help improve it. This
	far it runs on most browsers ok but we need to validate that before going live.

	Rik, I don't like to distribute the layout for Spamikaze, can we use the blanks for that?

	Regards,

	Hans

2003-06-22  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/INSTALL, /home/CVS/spamikaze/spamikaze/config/config.pl, /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl:
	our @MXBACKUP in the config.pl

2003-06-22  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/html/index.php: link to log of presentation

2003-06-22  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/config/config.pl:
	Config file for the Perl scripts

	* /home/CVS/spamikaze/INSTALL, /home/CVS/spamikaze/spamikaze/cgi-bin/listing.cgi, /home/CVS/spamikaze/spamikaze/cgi-bin/remove.cgi, /home/CVS/spamikaze/spamikaze/scripts/named.pl, /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/sendmail.pl:
	Central configuration for Perl. See the install.

	* /home/CVS/spamikaze/INSTALL:
	Update by Horacio J. Pe=F1a

	--- INSTALL.orig        2003-06-18 17:40:34.000000000 -0300
	+++ INSTALL     2003-06-21 21:45:55.000000000 -0300
	@@ -9,7 +9,7 @@

	 At the prompt you can use mysqladmin to create a new database.

	 -    mysqladmin -u yourusername -r create spamikaze
	 +    mysqladmin -u root -p create spamikaze

2003-06-22  Cor Gest  <cor@clsnet.nl>

	* /home/CVS/spamikaze/ChangeLog: ChangeLog Updated

2003-06-20  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/html/download.php:
	paragraph breaks, keep http download url on spamikaze virthost

2003-06-20  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/html/download.php: *** empty log message ***

	* /home/CVS/spamikaze/html/download.php:
	download link to pub instead of /pub

2003-06-20  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/html/index.php: spamikaze 0.1 released

	* /home/CVS/spamikaze/html/download.php: download URLs

2003-06-20  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/spamikaze/scripts/passivetrap.pl, /home/CVS/spamikaze/spamikaze/scripts/popchecker.pl:
	Altered @MXBACKUP

2003-06-20  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/html/download.php:
	paragraph breaks, keep http download url on spamikaze virthost

2003-06-20  h-wolters  <h-wolters@cleopatra>

	* /home/CVS/spamikaze/html/download.php: *** empty log message ***

	* /home/CVS/spamikaze/html/download.php:
	download link to pub instead of /pub

2003-06-20  riel  <riel@cleopatra>

	* /home/CVS/spamikaze/html/index.php: spamikaze 0.1 released

	* /home/CVS/spamikaze/html/download.php: download URLs











	